<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
</head>
<body>    
    <div class="header">
    <div class="title">
      <h1>Welcome in Zagg's Clubhouse</h1>
      <h3>
        <i>To see post information you have to create a Zagg-Account</i>
      </h3>
    </div>
    <div class="links">
      <a href="/">Home</a>
    </div>
  </div>
    <form action="sign-up" method="post" class="sign-up-form">
        <h2>Sign Up</h2>
        <div class="username">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="email">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="password">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" minlength="6" required>
        </div>        
        <div class="password rp">
            <label for="passwordRp">Repeat password:</label>
            <input type="password" id="passwordRp" name="passwordRp" minlength="6" required>
            <p class="password-err"></p>
        </div>
        <button id="submitBtn" type="submit">Submit</button>
    </form>
    <div class="<%= locals.err ? 'err' : '' %>">
        <% if(locals.err){ %>
            <% if (err.username) { %>
                <p"><%= err.username.msg %></p>
            <% } %>    
            <% if (err.password) { %>
                <p"><%= err.password.msg %></p>
            <% } %>           
             <% if (err.email) { %>
                <p"><%= err.email.msg %></p>
            <% } %> 
            <% if (err.database) { %>
                <p"><%= err.database.msg %></p>
            <% } %>      
        <% } %>

    </div>
    <script>
        document.querySelector("#passwordRp").addEventListener("input", () => {
            const p = document.querySelector("#password").value;
            const p2 = document.querySelector("#passwordRp").value;
            if(p == p2){
                document.querySelector(".password-err").innerText = ""
            } else{
                document.querySelector(".password-err").innerText = "Passwords don't match"
            }     
        })

        document.querySelector(".sign-up-form").addEventListener("submit", (e)=>{
            const p = document.querySelector("#password").value;
            const p2 = document.querySelector("#passwordRp").value;
            if(p != p2){
                e.preventDefault();
                alert("Passwords do not match")
            }
        })
    </script>
</body>
</html>